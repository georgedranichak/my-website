<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Engaging with Sex Retail Culture (Summer, 2025)</title>
  <meta name="color-scheme" content="dark">
  <link rel="stylesheet" href="/css/site.css">
</head>
<body>
  <header>
    <div class="container center stack">
      <h1 class="brand"><a href="/">George Dranichak</a></h1>
<nav>
  <ul>
    <li>
      <a href="/journal/">
        <i data-lucide="book-open"></i>
        Journal
      </a>
    </li>
    <li>
      <a href="/archive.html">
        <i data-lucide="archive"></i>
        Archive
      </a>
    </li>
    <li>
      <a href="/my links.html">
        <i data-lucide="link-2"></i>
        My Links
      </a>
    </li>
  </ul>
</nav>
    </div>
  </header>
  <main class="container stack">
    
<link rel="stylesheet" href="/css/archive.css">

<article class="card stack">
  <header class="stack">
    <h1 style="margin:0">Engaging with Sex Retail Culture (Summer, 2025)</h1>
    <p class="muted" style="margin:0">
      <a href="/archive.html">← Back to Project Archive</a>
    </p>
  </header>

  <div id="pdfContainer" class="stack"></div>

  <noscript>
    <embed
      src="/files/Engaging with Sex Retail Culture FINAL DRAFT.pdf#toolbar=0"
      type="application/pdf"
      style="width:100%;height:80vh;border:1px solid var(--border);
             border-radius:8px;background:#111"
    >
  </noscript>
</article>

<script>
(function(){
  const cdn="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.min.js";
  const worker="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.worker.min.js";
  const url = encodeURI("/files/Engaging with Sex Retail Culture FINAL DRAFT.pdf");

  function ensure(){
    return new Promise((res,rej)=>{
      if(window.pdfjsLib) return res();
      const s=document.createElement('script');
      s.src=cdn; s.onload=res; s.onerror=rej;
      document.head.appendChild(s);
    }).then(()=>{ window.pdfjsLib.GlobalWorkerOptions.workerSrc = worker; });
  }

  async function render(){
    const wrap = document.getElementById('pdfContainer');
    wrap.innerHTML = '<p class="muted">Loading preview…</p>';
    try {
      await ensure();
      const pdf = await window.pdfjsLib.getDocument({ url }).promise;
      wrap.innerHTML = "";
      for (let p=1; p<=pdf.numPages; p++){
        const page = await pdf.getPage(p);
        const base = page.getViewport({ scale: 1 });
        const maxW = Math.min(wrap.clientWidth || 900, 900);
        const scale = maxW / base.width;
        const vp = page.getViewport({ scale });

        const c = document.createElement('canvas');
        c.className = 'pdf-canvas';
        c.width = vp.width;
        c.height = vp.height;
        wrap.appendChild(c);

        await page.render({
          canvasContext: c.getContext('2d'),
          viewport: vp
        }).promise;
      }
    } catch (e) {
      console.error("PDF.js failed; falling back to <embed>", e);
      wrap.innerHTML =
        `<embed src="${url}#toolbar=0" type="application/pdf"
                style="width:100%;height:80vh;border:1px solid var(--border);
                       border-radius:8px;background:#111">`;
    }
  }
  render();
})();
</script>

  </main>
  <footer>
    <div class="container center">© <span id="year"></span> George Dranichak</div>
  </footer>
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
  <script src="https://unpkg.com/lucide@latest"></script>
<script>
  lucide.createIcons();
</script>
</body>
</html>
